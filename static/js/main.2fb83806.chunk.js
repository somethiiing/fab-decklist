(this["webpackJsonpfab-form-filler"]=this["webpackJsonpfab-form-filler"]||[]).push([[0],{54:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var l=n(15),a=n.n(l),i=n(27),s=n.n(i),r=(n(54),n(28)),c=n(29),o=n(30),d=n(13),u=n(49),h=n(48),b=function(e){return e.replace(/,/g,"\n").split("\n").map((function(e){return e.trim()})).map((function(e){return["",e]}))},p=function(e){var t={red:[],yellow:[],blue:[]};return e.split("\n").map((function(e){return e.trim()})).filter((function(e){return void 0!==e&&"#"!==e[0]})).forEach((function(e){var n=e.slice(-8);(n.includes("red")||n.includes("1"))&&t.red.push(e.replace(/\(red\)$/,"").replace(/\(1\)$/,"")),(n.includes("yellow")||n.includes("2"))&&t.yellow.push(e.replace(/\(yellow\)$/,"").replace(/\(2\)$/,"")),(n.includes("blue")||n.includes("3"))&&t.blue.push(e.replace(/\(blue\)$/,"").replace(/\(3\)$/,""))})),t},f=function(e){return e.map((function(e){return e.includes(1)?[1,e.replace(/\(1\)/,"").replace(/1 x/,"").trim()]:e.includes(2)?[2,e.replace(/\(2\)/,"").replace(/2 x/,"").trim()]:e.includes(3)?[3,e.replace(/\(3\)/,"").replace(/3 x/,"").trim()]:void 0})).sort((function(e,t){return e[1]<t[1]?-1:1}))},m=n(19),j=n.n(m),F=n(31),g=n(32),x=n.p+"static/media/fab_cc_decklist 1.2.c2521910.pdf";function O(){return(O=Object(F.a)(j.a.mark((function e(t){var n,l,a,i,s,r,c,o,d,u,h,b,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x).then((function(e){return e.arrayBuffer()}));case 2:return n=e.sent,e.next=5,g.PDFDocument.load(n);case 5:return l=e.sent,a=l.getForm(),i=t.fullName,s=t.gemId,r=t.pronoun,c=t.date,o=t.event,d=t.hero,a.getTextField("Full Name").setText(i),a.getTextField("GEM ID").setText(s),a.getTextField("Pronoun").setText(r),a.getTextField("Date").setText(c),a.getTextField("Event").setText(o),a.getTextField("Hero").setText(d),u=v("eqp",l,t),h=v("red",l,t),b=v("yellow",l,t),p=v("blue",l,t),f=u+h+b+p,a.getTextField("grand-total").setText(String(f)),e.next=22,l.save();case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e,t,n){var l=t.getForm(),a=0;return n[e].forEach((function(t,n){a+=Number(t[0]),l.getTextField("".concat(e,"-count-").concat(n+1)).setText(String(t[0])),l.getTextField("".concat(e,"-card-").concat(n+1)).setText(t[1])})),a="eqp"===e?n[e].length:a,l.getTextField("".concat(e,"-total")).setText(String(a)),a},N="Equipment/Weapons.\nList one card on each line OR comma separated.\n\nExample:\nHarmonized Kodachi\nHarmonized Kodachi\nMask of Momentum\nFyendal's Spring Tunic\nBreaking Scales\nNullrune Boots\nSnapdragon Scalers\n",k="Decklist.\nOne card on each line.\n\nExamples:\n2 x Flik Flak (red)\n2 x Flik Flak (1)\n(2) Flik Flak (red)\n(2) Flik Flak (1)\n",w=(n(64),n(6)),D=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={nameField:"",gemIdField:"",pronounField:"",dateField:"",eventField:"",heroField:"",eqpField:"",decklistField:"",parsed:{eqp:[],red:[],yellow:[],blue:[]},pdfSrc:"",showData:!1},l.handleFieldOnChange=l.handleFieldOnChange.bind(Object(d.a)(l)),l.handleSubmit=l.handleSubmit.bind(Object(d.a)(l)),l.fillTestData=l.fillTestData.bind(Object(d.a)(l)),l.generateDecklist=l.generateDecklist.bind(Object(d.a)(l)),l.toggleShowData=l.toggleShowData.bind(Object(d.a)(l)),l}return Object(o.a)(n,[{key:"handleFieldOnChange",value:function(e,t){this.setState(Object(r.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=this.state,t=e.nameField,n=e.gemIdField,l=e.pronounField,a=e.dateField,i=e.eventField,s=e.heroField,r=e.eqpField,c=e.decklistField,o=Object.assign({},function(e){var t=p(e);return t.red=f(t.red),t.yellow=f(t.yellow),t.blue=f(t.blue),t}(c),{fullName:t,gemId:n,pronoun:l,date:a,event:i,hero:s,eqp:b(r)});this.generateDecklist(o),this.setState({parsed:o})}},{key:"generateDecklist",value:function(e){var t=this;(function(e){return O.apply(this,arguments)})(e).then((function(e){var n=new Blob([e],{type:"application/pdf"}),l=URL.createObjectURL(n);t.setState({pdfSrc:l})})).catch((function(e){return console.log(e)}))}},{key:"toggleShowData",value:function(){var e=this.state.showData;this.setState({showData:!e})}},{key:"fillTestData",value:function(){this.setState({nameField:"wilson",gemIdField:"123123",pronounField:"he/him/her",dateField:"12/25/2015",eventField:"fake event",heroField:"Oldhim, Grandfather of Eternity",eqpField:"Crater Fist, Crown of Seeds, Fyendal's Spring Tunic, Heart of Ice, Ironhide Legs, Nullrune Gloves, Nullrune Hood, Rampart of the Ram's Head,Winter's Wail",decklistField:"\n  (3) Command and Conquer (red)\n  (3) Endless Winter (red)\n  (3) Fate Foreseen (red)\n  (3) Oaken Old (red)\n  (3) Pummel (red)\n  (3) Sigil of Solace (red)\n  (3) Sink Below (red)\n  (3) Spinal Crush (red)\n  (3) Art of War (yellow)\n  (3) Forged for War (yellow)\n  (2) Remembrance (yellow)\n  (3) Autumn's Touch (blue)\n  (3) Blizzard (blue)\n  (3) Channel Lake Frigid (blue)\n  (3) Cranial Crush (blue)\n  (3) Disable (blue)\n  (2) Exposed to the Elements (blue)\n  (3) Glacial Footsteps (blue)\n  (3) Last Ditch Effort (blue)\n  (1) Pulse of Isenloft (blue)\n  (3) Rouse the Ancients (blue)\n  (3) Sow Tomorrow (blue)\n  (3) Staunch Response (blue)\n  (3) Winter's Bite (blue)\n  (3) Winter's Grasp (blue)\n      "})}},{key:"render",value:function(){var e=this,t=this.state,n=t.pdfSrc,l=t.showData,a=t.heroField,i=""!==n?n:x;return window.fillTestData=function(){return e.fillTestData()},window.toggleShowData=function(){return e.toggleShowData()},Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsxs)("div",{className:"app",children:[Object(w.jsxs)("div",{className:"leftCol",children:[Object(w.jsx)("h2",{className:"sectionHeader",children:"Personal Information"}),Object(w.jsxs)("label",{className:"section",for:"fullName",children:[Object(w.jsx)("span",{className:"label",children:"Full Name:"}),Object(w.jsx)("input",{className:"field",value:this.state.nameField,placeholder:"Full Name",onChange:function(t){return e.handleFieldOnChange(t,"nameField")}})]}),Object(w.jsxs)("label",{className:"section",for:"gemId",children:[Object(w.jsx)("span",{className:"label",children:"GEM ID:"}),Object(w.jsx)("input",{className:"field",value:this.state.gemIdField,placeholder:"GEM ID",onChange:function(t){return e.handleFieldOnChange(t,"gemIdField")}})]}),Object(w.jsxs)("label",{className:"section",for:"pronoun",children:[Object(w.jsx)("span",{className:"label",children:"Pronouns:"}),Object(w.jsx)("input",{className:"field",value:this.state.pronounField,placeholder:"Pronoun(s)",onChange:function(t){return e.handleFieldOnChange(t,"pronounField")}})]}),Object(w.jsx)("h2",{className:"sectionHeader",children:"Event Information"}),Object(w.jsxs)("label",{className:"section",for:"date",children:[Object(w.jsx)("span",{className:"label",children:"Date:"}),Object(w.jsx)("input",{className:"field",value:this.state.dateField,placeholder:"Date",onChange:function(t){return e.handleFieldOnChange(t,"dateField")}})]}),Object(w.jsxs)("label",{className:"section",for:"event",children:[Object(w.jsx)("span",{className:"label",children:"Event:"}),Object(w.jsx)("input",{className:"field",value:this.state.eventField,placeholder:"Event",onChange:function(t){return e.handleFieldOnChange(t,"eventField")}})]}),Object(w.jsx)("h2",{className:"sectionHeader",children:"Deck Information"}),Object(w.jsxs)("label",{className:"section",for:"hero",children:[Object(w.jsx)("span",{className:"label",children:"Hero:"}),Object(w.jsx)("input",{className:"field",value:this.state.heroField,placeholder:"Hero",onChange:function(t){return e.handleFieldOnChange(t,"heroField")}})]}),Object(w.jsxs)("label",{className:"section",for:"equipment",children:[Object(w.jsx)("span",{className:"label",children:"Equipment:"}),Object(w.jsx)("textarea",{className:"equipment field",value:this.state.eqpField,placeholder:N,onChange:function(t){return e.handleFieldOnChange(t,"eqpField")}})]}),Object(w.jsxs)("label",{className:"section",for:"decklist",children:[Object(w.jsx)("span",{className:"label",children:"Decklist:"}),Object(w.jsx)("textarea",{className:"decklist field",value:this.state.decklistField,placeholder:k,onChange:function(t){return e.handleFieldOnChange(t,"decklistField")}})]}),Object(w.jsx)("button",{className:"button",onClick:this.handleSubmit,children:"Generate Decklist"})]}),Object(w.jsxs)("div",{className:"rightCol",children:[Object(w.jsx)("h2",{className:"sectionHeader",children:"Preview: "}),Object(w.jsxs)("div",{className:"previewContainer",children:[Object(w.jsx)("iframe",{className:"preview",id:"decklist",name:"decklist",height:"665",width:"440",type:"application/pdf",src:i}),Object(w.jsx)("a",{className:"button",href:i,download:"".concat(a," - decklist"),children:"Download Decklist"})]}),l&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{className:"sectionHeader",children:"State: "}),Object(w.jsx)("pre",{children:JSON.stringify(this.state,null,4)})]})]})]}),Object(w.jsxs)("div",{className:"footer",children:["Flesh and Blood Decklist Generator by ",Object(w.jsx)("a",{href:"http://wilsonyu.io",children:"Wilson Yu"}),". Please send feedback, or report issues direactly via ",Object(w.jsx)("a",{href:"https://github.com/somethiiing/fab-decklist",children:"Github"}),"."]})]})}}]),n}(a.a.Component),S=D,C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,l=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),l(e),a(e),i(e),s(e)}))};s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(S,{})}),document.getElementById("root")),C()}},[[66,1,2]]]);
//# sourceMappingURL=main.2fb83806.chunk.js.map